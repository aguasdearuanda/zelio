language: ruby
script:
  - RAILS_ENV=test bundle exec rake db:migrate --trace
  - bundle exec rake db:test:prepare
  - bundle exec rspec
before_script:
  - psql -c 'create database zelio_test;' -U postgres
rvm:
  - 2.6.3
services:
  - postgresql
before_install:
  - gem update --system
notifications:
  slack:
    secure: PkrQcoWOJi72RlZ1secOQ9iFyePMBP6Juf+wc4xhdANQVEDdKDKj24SOVmfVBW/WbDvS3i/9moSwtXFLUWsAH1J9Ba6zIMWchl+uzh2g7N/5MYMIlmpeK8E0FDg31iejMUiCpsB3+lwvDqkk3wQenmJNEq91mEWN0bPjDZKOmnYVgPW8w1WhzrSgMaje4uIB5IcKAA7k2zvr96ldykz+7klSjtupfARkDdPNx6voHdwSQdY4n/LT4meptLKwEE6iZEC4hWYfZYWJDNsCbMJpHg9jotueKhw52iaAYUON97egk0a7fbnavUu9aHpbMMCqKb8nytkAbmO10bXhTmfbOXvILw2r5tKS6Kdn5PNWdvem0YCNEhEXUm8OiiZ+ucKZA0bSVLKtLlXm5tNenjZopZj1PUD0RrMh7/m3BKPIFLr+DorcfIS7zJZfZ6TE/COM5T/N5ou6RvyVHX1LeNPIJEV/EMSq7C+mTt05BRa7x6dn5epV0E+1dHChhiUK7D9dsSUl2T/Fnha+pTKG9AQL3wIvJpcBmsoieMYyR0VkkdZ7SZjV70xlh99dWQEG9y5/VL4MOaRGFhIyGcfhtrbjKcOpx/y902XPNZ9KNksMam+w2WcZ1IxZy7goBMiWTlXFbLKH5/EtZUQOmnPFLYtqYQbAVOG5S7MUUvTv5Kdq4HI=
    on_success: always
    on_failure: always
